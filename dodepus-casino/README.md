# Dodepus Casino — фронтенд

Интерфейс казино-платформы на React с каталогом игр, кабинетом пользователя и административной панелью. Проект собран на Vite, поддерживает тёмную/светлую тему, работает поверх локального симулятора бекэнда и готов к замене на реальное API.

---

## Быстрый старт

### Требования

- Node.js 18+
- npm 10+

### Установка и запуск

```bash
npm install          # установка зависимостей
npm run dev          # локальный дев-сервер на http://localhost:5173/
npm run build        # production-сборка в dist/
npm run preview      # предпросмотр собранного билда
npm run lint         # проверка eslint
```

---

## Технологии

- React 19 + React Router 7 для SPA и маршрутов.  
- Vite 7 — dev-сервер и сборка.  
- React-Bootstrap 2 / Bootstrap 5.3 для готовых компонентов.  
- Lucide-react для иконок.  
- Context API для авторизации (`AuthProvider`) и темизации (`ThemeProvider`).

---

## Структура проекта

```
dodepus-casino/
├─ docs/                     # внутренние гайды по страницам и потокам
├─ local-sim/                # слой локальной симуляции бекэнда (auth/admin/api)
├─ public/                   # статичные ассеты и заглушки игр
├─ scripts/                  # вспомогательные скрипты разработки
├─ src/
│  ├─ app/                   # оболочка приложения, провайдеры и роутинг
│  ├─ data/                  # фикстуры каталога игр
│  ├─ features/              # переиспользуемые доменные блоки
│  ├─ pages/                 # страницы клиента и админки
│  ├─ shared/                # общие UI-компоненты и утилиты
│  └─ index.css, main.jsx    # глобальные стили и точка входа
├─ eslint.config.js
├─ jsconfig.json
├─ package.json
└─ vite.config.js
```

Ключевые каталоги:

- `src/app` — каркас приложения (`App.jsx`), маршрутизация (`routes.jsx`), провайдеры авторизации и темизации.  
- `src/pages` — организован по доменам: клиентские (`home`, `lobby`, `game`, `catalog`, `auth`, `profile`, `not-found`) и административный блок (`admin/features/*`). Каждый домен имеет собственные `index.js` для коротких импортов.  
- `src/pages/profile` — самостоятельные вкладки кабинета (`wallet`, `history`, `terminal`, `personal`, `verification`, `promos`, `season`, `games-history`) со своими подкаталогами `blocks/`, `components/`, `hooks/`.  
- `src/shared/ui` — общие элементы интерфейса (хедер, футер, карточки игр).  
- `local-sim` — «офлайн-бекэнд» для авторизации, профиля и административных сценариев. UI обращается к нему вместо HTTP API.

---

## Архитектура приложения

### Оболочка и провайдеры

`main.jsx` подключает Bootstrap и разворачивает приложение внутри `BrowserRouter`, `ThemeProvider` и `AuthProvider`, обеспечивая доступ к теме и сессии из любой части UI.

### Маршруты

`src/app/routes.jsx` описывает публичные, защищённые (`RequireAuth`) и административные (`RequireAdmin`) маршруты. Поддерживаются пути `/`, `/lobby`, `/game/:provider/:slug` (и старый формат `/game/:slug`), `/login`, `/register`, `/profile/*` и вся административная зона `/admin/*`.

### Авторизация и профиль

`AuthProvider` хранит состояние сессии, пользователя и набор действий: вход/регистрация, обновление профиля, управление балансом и доступами админ-панели. Состояние синхронизируется с локальным симулятором (`local-sim/auth`), поэтому при замене на реальное API достаточно поменять реализации экшенов.

### Кабинет пользователя

Лэйаут `/profile` содержит левое меню и маршрутизирует вкладки: баланс, история, терминал, персональные данные, верификация, акции, сезон и история игр. Каждая вкладка разбита на отдельные блоки и виджеты, что упрощает доработку.

### Верификация

Раздел `profile/verification` реализует многошаговый поток: четыре модуля (почта, телефон, адрес, документы), формы с блокировками по статусам, история действий и загрузки. Логика статусов вынесена в `shared/verification`, а данные синхронизируются с админской очередью.

### Административная панель

`src/pages/admin/features` группирует экраны: обзор, клиенты, транзакции, очередь верификации, промокоды (список/создание/архив), управление ролями, чаты персонала и журнал действий. Все разделы подключаются в роутере через единый индекс-файл.

### Каталог игр

Фикстуры игр находятся в `src/data/games.js`, включают slug провайдера, категорию, метаданные и рекомендации. Интерфейс использует данные для построения лобби и страниц игр.

---

## Локальная симуляция бекэнда

Каталог `local-sim` эмулирует API бэкенда и хранит данные в `localStorage`.

- `auth/` отвечает за регистрацию/вход, восстановление сессии и действия клиента (`profileActions.js`).  
- `admin/features/*` повторяет структуру админ-панели и содержит бизнес-логику, сиды и события для каждого раздела (клиенты, промокоды, верификация, транзакции, роли, коммуникации, мониторинг).  
- `logic/`, `seed/`, `tables/` — общие хелперы, нормализация статусов, таблицы локального «хранилища» и предзаполненные данные.

Переход на реальный сервер сводится к замене вызовов в сервисных слоях на HTTP-запросы с сохранением интерфейсов.

---

## UI и стили

- Bootstrap отвечает за сетку и базовые компоненты; глобальный переключатель темы сохраняется в `localStorage` и обновляет `data-bs-theme`.  
- `src/index.css` добавляет кастомизацию карточек игр, стики-сайдбар профиля, крупные суммы баланса и нейтральные поверхности.  
- Хедер (`shared/ui/Header.jsx`) содержит кнопки входа/регистрации, доступ к профилю, баланс пользователя, ссылки на админку и переключатель темы. Футер поддерживает «липкий» layout с `min-vh-100`.

---

## Скрипт генерации заглушки игры

`node scripts/new-game.mjs <provider> <slug> [--title "Название"]` создаёт папку `public/games/<provider>/<slug>/index.html` с шаблоном игры и выводит готовый маршрут. Файл `scripts/guide` содержит краткое руководство по использованию.

После генерации добавьте новую фикстуру в `src/data/games.js`, чтобы игра появилась в каталоге.

---

## Полезные документы

- `docs/pages-structure.md` — карта страниц и связь с симулятором.  
- `docs/verification-flow.md` — подробности потока KYC и соответствия требованиям.  
- README-файлы внутри `local-sim` и `src/pages` уточняют устройство соответствующих каталогов.

---

## Дальнейшая разработка

1. Подключить реальные API-методы вместо `local-sim`, сохранив интерфейсы экшенов.  
2. Добавить новые категории/игры через фикстуры и скрипт `new-game.mjs`.  
3. Расширить админку (например, отчёты или реальный чат), используя существующие паттерны `features/*`.  
4. Настроить CI на запуск `npm run lint` и сборки, чтобы контролировать качество перед деплоем.

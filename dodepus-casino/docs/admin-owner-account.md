# Создание owner-аккаунта в local-sim

> Коротко: добавили функцию `createOwnerAccount` в мок-API авторизации. Она создаёт владельца с ролью `owner`, записывает профиль 
> в локальную БД и возвращает готовые учётные данные (включая пароль, если он сгенерирован автоматически).

## Когда использовать
- Нужно быстро получить полноценный owner-аккаунт для проверки админки.
- Не хочется плодить фиктивные сиды или файлы с заранее прописанными пользователями.
- Требуется кастомизировать профиль (имя, баланс, страна) во время создания.

## Как вызвать
```js
import { createOwnerAccount } from '../features/auth/api';

async function bootstrapOwner() {
  const result = await createOwnerAccount({
    email: 'owner@local.test',
    profile: {
      firstName: 'Владислав',
      lastName: 'Owner',
      country: 'UA',
      balance: 2500,
      casinoBalance: 500,
    },
  });

  console.log(result.credentials);
  return result.user;
}
```

> Совет: для локальной отладки можно выполнить тот же импорт прямо в консоли браузера через `await import('/src/features/auth/api.js')` и вызвать функцию вручную.

## Что вернёт функция
```ts
{
  user: LocalUser; // объединённые данные auth + profile с ролью owner
  credentials: {
    email: string | null;
    phone: string | null;
    password: string;      // если пароль не передали, он сгенерируется и вернётся здесь
    generated: boolean;    // true, если пароль сгенерирован автоматически
  };
}
```

- Если передать `password`, он сохранится как есть, флаг `generated` будет `false`.
- Если не указывать пароль, local-sim создаст стойкое значение (`Ow******A1!`) и вернёт его в ответе.

## Валидации и ограничения
- Нужно указать хотя бы e-mail или телефон, иначе будет ошибка.
- Проверяется уникальность контактов и сила пароля.
- Дополнительные `appMetadata`/`userMetadata` можно передать через одноимённые поля.
- В профиль автоматически записывается `nickname`, `firstName` (если не указаны) и статус e-mail/телефона в зависимости от
  `confirmEmail` / `confirmPhone` (по умолчанию оба `true`).

## После вызова
- Пользователь попадает в таблицу `auth_users` локальной БД и сразу доступен в списках админки.
- Профиль и балансы сохраняются через `saveExtras`, поэтому все карточки клиента сразу отображают свежие значения.
- Повторный запуск с тем же e-mail/телефоном выдаст понятную ошибку — можно менять контакты и запускать снова.


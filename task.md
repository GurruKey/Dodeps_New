Пошаговый план запуска верификации (без кода)

Версия: v1.0 · Дата: 2025‑10‑08

Ниже — простой пошаговый план, без кода, чтобы собрать систему целиком: клиентская часть, админка и локальная «псевдо‑база».

Шаг 1. Папка клиента: profile/verification

Задача: всё, что видит и делает клиент.

Структура (без деталей кода):

profile/verification/page — сама страница верификации (плашки, статусы, кнопки).

profile/verification/widgets — виджеты: индикаторы статусов, счётчик x/4, всплывающие подсказки.

profile/verification/forms — формы и поля для Почты, Номера, Адреса, Документов.

profile/verification/state — хранение текущих статусов (◻️/❓/✅/❌) и блокировок полей.

profile/verification/actions — отправка «Подтвердить», «Повторно», «Отменить запрос».

profile/verification/history — локальный показ истории по каждому направлению (только текстовые причины отказа).

profile/verification/services — связь с локальной «псевдо‑базой» (чтение/запись состояний).

Ответственность папки: отрисовать клиентский интерфейс, держать статусы, уметь отправлять/отменять запросы и показывать историю.

Шаг 2. Папка админки: admin/verification

Задача: то, где админ видит карточки и принимает решения.

Структура (без деталей кода):

admin/verification/page — главная страница с 4 секциями (аккордионами): Запросы, Частичная, Отказано, Верифицировано.

admin/verification/search — глобальный поиск (Имя/Фамилия/Почта/ID/Телефон), авт0‑разворачивание секций по результату.

admin/verification/cards — карточка клиента (показывает только ID, время, 4 индикатора, x/4).

admin/verification/modal — модалка с 4 вкладками (Почта/Номер/Адрес/Документы): действия Подтвердить/Отклонить, комментарий, «карандаш» для Адреса, история.

admin/verification/state — хранение списков по секциям и реакция на решения админа.

admin/verification/services — связь с локальной «псевдо‑базой»: чтение/запись решений, лог истории, перемещения между секциями.

Ответственность папки: поиск, просмотр карточек, принятие решений, ведение истории, перемещение между секциями.

Шаг 3. Локальная имитация БД: local-sim (как «SQL-таблица» на проекте)

Задача: простая «псевдо‑база», чтобы всё работало локально, как будто это настоящая БД.

Структура (без деталей кода):

local-sim/tables — условные «таблицы»: клиенты, направления по клиенту, история.

local-sim/seed — стартовые данные (пара клиентов, разные статусы для тестов).

local-sim/logic — правила изменения статусов и подсчёт x/4.

local-sim/api — простые методы для чтения/записи (как будто это сервер).

Ответственность папки: хранить данные и позволять клиенту/админу менять их по правилам.

Шаг 4. Навигация и входные точки

Добавить маршруты (пути) для: profile/personal, profile/verification, admin/verification.

В главном меню/хедере дать ссылки на профиль и админку (админка — только для роли «админ»).

Шаг 5. Общие понятия и статусы (единые для всех)

Направления: Почта, Номер, Адрес, Документы. Прогресс — x/4.

Статусы: ◻️ (нет запроса), ❓ (на проверке), ✅ (подтверждено), ❌ (отказано).

Как считать прогресс: x = число направлений со статусом ✅.

Что хранить в истории: дата/время, действие (отправил, отменил, подтвердил, отклонил, сбросил, поправил адрес), комментарий, кто сделал (клиент/админ). Имена админов видны только в админке.

Шаг 6. Правила доступности и блокировок на стороне клиента

На ❓ и ✅ — поля по направлению заблокированы.

На ◻️ и ❌ — поля доступны для правки и повторной отправки.

На ❓ — клиент может «Отменить запрос» до старта обработки.

При ❌ — клиент видит комментарий и может нажать «Повторно» после исправлений.

Шаг 7. Предусловия для кнопки «Подтвердить»

Почта/Номер: заполнено корректное значение.

Адрес: заполнены Страна/Город/Адрес + Имя/Фамилия/Пол/Дата рождения.

Документы: доступны после заполнения персональных данных; отправка формирует запрос.

Если что-то не хватает — показать понятный тултип и подсветку.

Шаг 8. Отправка запроса (клиент)

Сменить статус направления на ❓, заблокировать связанные поля.

Записать событие в историю («отправил на проверку»).

Обновить счётчик x/4 (не меняется при ❓, но может влиять на кнопку «Отменить запрос»).

Шаг 9. Отмена запроса (клиент)

Доступна только на ❓ и пока админ не начал обработку.

Возвращаем статус в ◻️, разблокируем поля, пишем в историю «отменил запрос».

Шаг 10. Работа админа с карточкой

Открыть модалку → выбрать вкладку (Почта/Номер/Адрес/Документы).

На ❓: Подтвердить или Отклонить (для отказа — комментарий обязателен).

На ✅: только просмотр; для Адреса доступен «карандаш» (правки форматирования с записью в историю).

История всегда видна в модалке.

Шаг 11. Перемещения между секциями админки

Если после решения по направлению получилось 4/4 — карточка в «Верифицировано».

Если не все 4 подтверждены — в «Частичную верификацию».

Если есть отказ — в «Отказано» (пока клиент не подаст повторно).

Если из «Частичной» клиент снова подал по одному направлению — карточка появляется и в «Запросах…» (на время проверки).

Шаг 12. Сброс верификации (админ)

Доступен в «Верифицировано» по каждому направлению.

Требуется комментарий.

После сброса: статус → ◻️, прогресс уменьшается (4/4 → 3/4), карточка возвращается в «Частичную».

Шаг 13. Поиск и фильтры

Глобальный поиск сверху (Имя/Фамилия/Почта/ID/Телефон).

Результат раскрывает нужный аккордион и подсвечивает карточку.

Фильтры по направлениям и статусам (например, Номер = ❓) — для быстрого отбора.

Шаг 14. Роли и доступы

Клиент видит только свои данные и статусы, комментарии отказов — без имени админа.

Админ видит всех клиентов, их ID, статусы, историю (с именем админа). Доступ в админку — только у роли «админ».

Шаг 15. Проверки и сценарии тестирования (минимум)

Регистрация по почте → добавление номера → подтверждение номера.

Регистрация по номеру → подтверждение почты.

Адрес: не хватает полей → «Подтвердить» недоступна → дозаполнение → отправка.

Отмена на ❓ → редактирование → повторная отправка.

Админ: подтверждение/отказ + комментарий → проверка перемещения по секциям.

Сброс из «Верифицировано» → падение x/4 и переход в «Частичную».

Шаг 16. Подключение всего вместе (рабочая связка)

Клиент и админ общаются с local-sim через один и тот же простой слой запросов.

Все экраны читают статусы из одного источника и обновляют их строго через правила (чтобы логика была одинаковой везде).

История пишется при каждом значимом действии и отображается и у клиента (без имён админов), и в админке (полная версия).

Шаг 17. «Кнопки по правилам» (единое поведение)

Кнопки активны/неактивны исходя из статуса и предусловий.

Подсказки объясняют «почему неактивно».

Никаких «скрытых» действий — всё видно, но может быть серым (некликабельно).

Шаг 18. Переход с локальной имитации на реальный сервер (когда будет готов)

Сохранить те же правила и названия статусов.

Заменить local-sim/api на реальные запросы.

Убедиться, что история продолжает записываться и отображаться.

Доступы и роли подтянуть из реальной системы.

Шаг 19. Мини‑чек‑лист «Готово к демо»

Админка: 4 секции свёрнуты по умолчанию, поиск работает, карточки только с ID и индикаторами.

Клиент: видит 4 направления, может отправлять/отменять/повторять, видит комментарии отказов.

Перемещения между секциями и счётчик x/4 работают по правилам.

Сброс из «Верифицировано» корректно переводит в «Частичную».

История видна и полная у админа, и короткая у клиента.

Шаг 20. Что за что отвечает (коротко)

profile/verification — клиентский экран и действия клиента.

admin/verification — экраны и действия админа.

local-sim — хранение данных «как таблицы», правила смены статусов, история, общий доступ для клиента и админа.

Навигация — пути к экранам и доступ по ролям.

Правила — единые статусы, блокировки, подсчёт прогресса, перемещения между секциями, история.

Готово. По этому плану можно идти шаг за шагом и собрать рабочую систему без привязки к конкретному стеку.